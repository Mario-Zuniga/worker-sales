{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/mario/Documents/React/worker-sales/frontend/src/ShowSales.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { fetchData } from \"./redux/actions/index\";\nimport { toggled } from \"./redux/actions/index\";\nimport axios from \"axios\";\nimport { LinearProgress, ListItemText, Typography, Container, ListItem, Toolbar, Switch, AppBar, Button, Paper, Grid } from \"@material-ui/core\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport { useStyles } from \"./styles/ShowSalesStyles\";\nimport bgl from \"./styles/bg-l.svg\";\nimport bgd from \"./styles/bg-d.svg\";\n\nfunction ShowSales() {\n  _s();\n\n  const classes = useStyles();\n  const history = useHistory();\n  const {\n    id\n  } = useParams();\n  const dispatch = useDispatch();\n  const [list, setList] = useState({\n    flag: false,\n    data: []\n  });\n  let toggledTheme = useSelector(state => state.theme);\n  let employee = useSelector(state => state.workers);\n  useEffect(() => {\n    const FetchData = async () => {\n      setList({\n        flag: true,\n        data: employee\n      });\n    };\n\n    FetchData();\n  }, [employee]);\n\n  if (employee === null) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 12\n    }, this);\n  } else {\n    const elementsIndex = employee.findIndex(element => element._id === id);\n    let totalSold = 0;\n\n    if (employee[elementsIndex].sales.length > 0) {\n      for (let i = 0; i < employee[elementsIndex].sales.length; i++) {\n        totalSold += parseInt(employee[elementsIndex].sales[i].qty);\n      }\n    }\n\n    const progress = totalSold / parseInt(employee[elementsIndex].expSales) * 100;\n\n    const deleteSale = async data => {\n      let allSales = employee[elementsIndex].sales;\n      const specificSale = employee[elementsIndex].sales.findIndex(element => element.id === data.id);\n      allSales.splice(specificSale, 1);\n      const updatedSales = {\n        sales: allSales\n      };\n      await axios({\n        method: \"patch\",\n        url: `/api/users/edit/${id}`,\n        data: updatedSales\n      });\n      dispatch(fetchData);\n      history.push(`/employee/${id}`);\n    };\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: toggledTheme ? \"#011212\" : \"#0FB5B8\",\n        backgroundImage: toggledTheme ? `url(${bgd})` : `url(${bgl})`\n      },\n      className: classes.root,\n      children: [/*#__PURE__*/_jsxDEV(AppBar, {\n        position: \"static\",\n        style: {\n          backgroundColor: toggledTheme ? \"white\" : \"black\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Toolbar, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            className: classes.title,\n            style: {\n              color: toggledTheme ? \"black\" : \"white\"\n            },\n            onClick: () => {\n              history.push(\"/\");\n            },\n            children: \"Sales Administration\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Switch, {\n            checked: toggledTheme,\n            color: \"secondary\",\n            onClick: () => {\n              dispatch(toggled());\n              localStorage.setItem(\"themeData\", JSON.stringify(!toggledTheme));\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            className: classes.themeTitle,\n            style: {\n              color: toggledTheme ? \"black\" : \"white\"\n            },\n            children: toggledTheme ? \"Dark Mode\" : \"Light Mode\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        className: classes.container,\n        maxWidth: \"lg\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            className: classes.grid,\n            item: true,\n            xs: 12,\n            sm: 3,\n            children: /*#__PURE__*/_jsxDEV(Paper, {\n              className: classes.paper,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h5\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: employee[elementsIndex].firstName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: employee[elementsIndex].lastName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                fullWidth: true,\n                variant: \"contained\",\n                className: classes.button,\n                color: toggledTheme ? \"secondary\" : \"primary\",\n                onClick: () => {\n                  history.push(`/sales/${id}`);\n                },\n                children: \"Add Sale\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 9,\n            children: [/*#__PURE__*/_jsxDEV(Paper, {\n              className: classes.paper,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                className: classes.salesInfo,\n                variant: \"h5\",\n                children: \"Total sales\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                className: classes.salesInfo,\n                variant: \"body1\",\n                children: `$${totalSold} / $${employee[elementsIndex].expSales}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(LinearProgress, {\n                  className: classes.buffer,\n                  color: toggledTheme ? \"secondary\" : \"primary\",\n                  variant: \"determinate\",\n                  value: progress > 100 ? 100 : progress\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Paper, {\n              className: classes.paper,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h5\",\n                children: \"Sales Log\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this), employee[elementsIndex].sales.map(l => /*#__PURE__*/_jsxDEV(ListItem, {\n                children: [/*#__PURE__*/_jsxDEV(ListItemText, {\n                  primary: `Quantity: $${l.qty}`,\n                  secondary: `Date: ${l.date}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(DeleteIcon, {\n                  onClick: () => {\n                    deleteSale(l);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 21\n                }, this)]\n              }, l.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(ShowSales, \"i56cfRX/2yy5aHQUvanIzijzY7U=\", false, function () {\n  return [useStyles, useHistory, useParams, useDispatch, useSelector, useSelector];\n});\n\n_c = ShowSales;\nexport default ShowSales;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShowSales\");","map":{"version":3,"sources":["/home/mario/Documents/React/worker-sales/frontend/src/ShowSales.js"],"names":["React","useState","useEffect","useHistory","useParams","useSelector","useDispatch","fetchData","toggled","axios","LinearProgress","ListItemText","Typography","Container","ListItem","Toolbar","Switch","AppBar","Button","Paper","Grid","DeleteIcon","useStyles","ShowSales","classes","history","id","dispatch","list","setList","flag","data","toggledTheme","state","theme","employee","workers","FetchData","elementsIndex","findIndex","element","_id","totalSold","sales","length","i","parseInt","qty","progress","expSales","deleteSale","allSales","specificSale","splice","updatedSales","method","url","push","backgroundColor","backgroundImage","bgd","bgl","root","title","color","localStorage","setItem","JSON","stringify","themeTitle","container","grid","paper","firstName","lastName","button","salesInfo","buffer","map","l","date"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { fetchData } from \"./redux/actions/index\";\nimport { toggled } from \"./redux/actions/index\";\nimport axios from \"axios\";\n\nimport {\n  LinearProgress,\n  ListItemText,\n  Typography,\n  Container,\n  ListItem,\n  Toolbar,\n  Switch,\n  AppBar,\n  Button,\n  Paper,\n  Grid,\n} from \"@material-ui/core\";\n\nimport DeleteIcon from \"@material-ui/icons/Delete\";\n\nimport { useStyles } from \"./styles/ShowSalesStyles\";\n\nimport bgl from \"./styles/bg-l.svg\";\nimport bgd from \"./styles/bg-d.svg\";\n\nfunction ShowSales() {\n  const classes = useStyles();\n  const history = useHistory();\n  const { id } = useParams();\n\n  const dispatch = useDispatch();\n\n  const [list, setList] = useState({\n    flag: false,\n    data: [],\n  });\n\n  let toggledTheme = useSelector((state) => state.theme);\n  let employee = useSelector((state) => state.workers);\n\n  useEffect(() => {\n    const FetchData = async () => {\n      setList({\n        flag: true,\n        data: employee,\n      });\n    };\n    FetchData();\n  }, [employee]);\n\n  if (employee === null) {\n    return <h1>Loading</h1>;\n  } else {\n    const elementsIndex = employee.findIndex((element) => element._id === id);\n\n    let totalSold = 0;\n    if (employee[elementsIndex].sales.length > 0) {\n      for (let i = 0; i < employee[elementsIndex].sales.length; i++) {\n        totalSold += parseInt(employee[elementsIndex].sales[i].qty);\n      }\n    }\n\n    const progress =\n      (totalSold / parseInt(employee[elementsIndex].expSales)) * 100;\n\n    const deleteSale = async (data) => {\n      let allSales = employee[elementsIndex].sales;\n      const specificSale = employee[elementsIndex].sales.findIndex(\n        (element) => element.id === data.id\n      );\n      allSales.splice(specificSale, 1);\n      const updatedSales = {\n        sales: allSales,\n      };\n      await axios({\n        method: \"patch\",\n        url: `/api/users/edit/${id}`,\n        data: updatedSales,\n      });\n\n      dispatch(fetchData);\n      history.push(`/employee/${id}`);\n    };\n\n    return (\n      <div\n        style={{\n          backgroundColor: toggledTheme ? \"#011212\" : \"#0FB5B8\",\n          backgroundImage: toggledTheme ? `url(${bgd})` : `url(${bgl})`,\n        }}\n        className={classes.root}\n      >\n        <AppBar\n          position=\"static\"\n          style={{ backgroundColor: toggledTheme ? \"white\" : \"black\" }}\n        >\n          <Toolbar>\n            <Typography\n              variant=\"h6\"\n              className={classes.title}\n              style={{ color: toggledTheme ? \"black\" : \"white\" }}\n              onClick={() => {\n                history.push(\"/\");\n              }}\n            >\n              Sales Administration\n            </Typography>\n            <Switch\n              checked={toggledTheme}\n              color=\"secondary\"\n              onClick={() => {\n                dispatch(toggled());\n                localStorage.setItem(\n                  \"themeData\",\n                  JSON.stringify(!toggledTheme)\n                );\n              }}\n            />\n            <Typography\n              variant=\"subtitle1\"\n              className={classes.themeTitle}\n              style={{ color: toggledTheme ? \"black\" : \"white\" }}\n            >\n              {toggledTheme ? \"Dark Mode\" : \"Light Mode\"}\n            </Typography>\n          </Toolbar>\n        </AppBar>\n\n        <Container className={classes.container} maxWidth=\"lg\">\n          <Grid container spacing={3}>\n            <Grid className={classes.grid} item xs={12} sm={3}>\n              <Paper className={classes.paper}>\n                <Typography variant=\"h5\">\n                  <div>{employee[elementsIndex].firstName}</div>\n                  <div>{employee[elementsIndex].lastName}</div>\n                </Typography>\n                <Button\n                  fullWidth\n                  variant=\"contained\"\n                  className={classes.button}\n                  color={toggledTheme ? \"secondary\" : \"primary\"}\n                  onClick={() => {\n                    history.push(`/sales/${id}`);\n                  }}\n                >\n                  Add Sale\n                </Button>\n              </Paper>\n            </Grid>\n            <Grid item xs={12} sm={9}>\n              <Paper className={classes.paper}>\n                <Typography className={classes.salesInfo} variant=\"h5\">\n                  Total sales\n                </Typography>\n\n                <Typography\n                  className={classes.salesInfo}\n                  variant=\"body1\"\n                >{`$${totalSold} / $${employee[elementsIndex].expSales}`}</Typography>\n                <div>\n                  <LinearProgress\n                    className={classes.buffer}\n                    color={toggledTheme ? \"secondary\" : \"primary\"}\n                    variant=\"determinate\"\n                    value={progress > 100 ? 100 : progress}\n                  />\n                </div>\n              </Paper>\n\n              <Paper className={classes.paper}>\n                <Typography variant=\"h5\">Sales Log</Typography>\n                {employee[elementsIndex].sales.map((l) => (\n                  <ListItem key={l.id}>\n                    <ListItemText\n                      primary={`Quantity: $${l.qty}`}\n                      secondary={`Date: ${l.date}`}\n                    />\n                    <DeleteIcon\n                      onClick={() => {\n                        deleteSale(l);\n                      }}\n                    />\n                  </ListItem>\n                ))}\n              </Paper>\n            </Grid>\n          </Grid>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default ShowSales;\n"]},"metadata":{},"sourceType":"module"}